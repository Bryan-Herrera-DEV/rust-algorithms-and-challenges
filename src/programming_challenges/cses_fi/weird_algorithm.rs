pub fn weird_algorithm(mut n: u64) -> Vec<u64> {
    let mut result = vec![n];
    while n != 1 {
        n = if n % 2 == 0 { n / 2 } else { n * 3 + 1 };
        result.push(n);
    }
    result
}

#[cfg(test)]
mod tests {
    use super::weird_algorithm;

    #[test]
    fn test_weird_3() {
        let expected = vec![3, 10, 5, 16, 8, 4, 2, 1];
        assert_eq!(weird_algorithm(3), expected);
    }

    #[test]
    fn test_weird_7() {
        let expected = vec![7, 22, 11, 34, 17, 52, 26, 13, 40, 20, 10, 5, 16, 8, 4, 2, 1];
        assert_eq!(weird_algorithm(7), expected);
    }

    #[test]
    fn test_weird_15() {
        let expected = vec![
            15, 46, 23, 70, 35, 106, 53, 160, 80, 40, 20, 10, 5, 16, 8, 4, 2, 1,
        ];
        assert_eq!(weird_algorithm(15), expected);
    }

    #[test]
    fn test_weird_114514() {
        let expected = vec![
            114514, 57257, 171772, 85886, 42943, 128830, 64415, 193246, 96623, 289870, 144935,
            434806, 217403, 652210, 326105, 978316, 489158, 244579, 733738, 366869, 1100608,
            550304, 275152, 137576, 68788, 34394, 17197, 51592, 25796, 12898, 6449, 19348, 9674,
            4837, 14512, 7256, 3628, 1814, 907, 2722, 1361, 4084, 2042, 1021, 3064, 1532, 766, 383,
            1150, 575, 1726, 863, 2590, 1295, 3886, 1943, 5830, 2915, 8746, 4373, 13120, 6560,
            3280, 1640, 820, 410, 205, 616, 308, 154, 77, 232, 116, 58, 29, 88, 44, 22, 11, 34, 17,
            52, 26, 13, 40, 20, 10, 5, 16, 8, 4, 2, 1,
        ];
        assert_eq!(weird_algorithm(114514), expected);
    }

    #[test]
    fn test_weird_665215() {
        let expected = vec![
            665215,
            1995646,
            997823,
            2993470,
            1496735,
            4490206,
            2245103,
            6735310,
            3367655,
            10102966,
            5051483,
            15154450,
            7577225,
            22731676,
            11365838,
            5682919,
            17048758,
            8524379,
            25573138,
            12786569,
            38359708,
            19179854,
            9589927,
            28769782,
            14384891,
            43154674,
            21577337,
            64732012,
            32366006,
            16183003,
            48549010,
            24274505,
            72823516,
            36411758,
            18205879,
            54617638,
            27308819,
            81926458,
            40963229,
            122889688,
            61444844,
            30722422,
            15361211,
            46083634,
            23041817,
            69125452,
            34562726,
            17281363,
            51844090,
            25922045,
            77766136,
            38883068,
            19441534,
            9720767,
            29162302,
            14581151,
            43743454,
            21871727,
            65615182,
            32807591,
            98422774,
            49211387,
            147634162,
            73817081,
            221451244,
            110725622,
            55362811,
            166088434,
            83044217,
            249132652,
            124566326,
            62283163,
            186849490,
            93424745,
            280274236,
            140137118,
            70068559,
            210205678,
            105102839,
            315308518,
            157654259,
            472962778,
            236481389,
            709444168,
            354722084,
            177361042,
            88680521,
            266041564,
            133020782,
            66510391,
            199531174,
            99765587,
            299296762,
            149648381,
            448945144,
            224472572,
            112236286,
            56118143,
            168354430,
            84177215,
            252531646,
            126265823,
            378797470,
            189398735,
            568196206,
            284098103,
            852294310,
            426147155,
            1278441466,
            639220733,
            1917662200,
            958831100,
            479415550,
            239707775,
            719123326,
            359561663,
            1078684990,
            539342495,
            1618027486,
            809013743,
            2427041230,
            1213520615,
            3640561846,
            1820280923,
            5460842770,
            2730421385,
            8191264156,
            4095632078,
            2047816039,
            6143448118,
            3071724059,
            9215172178,
            4607586089,
            13822758268,
            6911379134,
            3455689567,
            10367068702,
            5183534351,
            15550603054,
            7775301527,
            23325904582,
            11662952291,
            34988856874,
            17494428437,
            52483285312,
            26241642656,
            13120821328,
            6560410664,
            3280205332,
            1640102666,
            820051333,
            2460154000,
            1230077000,
            615038500,
            307519250,
            153759625,
            461278876,
            230639438,
            115319719,
            345959158,
            172979579,
            518938738,
            259469369,
            778408108,
            389204054,
            194602027,
            583806082,
            291903041,
            875709124,
            437854562,
            218927281,
            656781844,
            328390922,
            164195461,
            492586384,
            246293192,
            123146596,
            61573298,
            30786649,
            92359948,
            46179974,
            23089987,
            69269962,
            34634981,
            103904944,
            51952472,
            25976236,
            12988118,
            6494059,
            19482178,
            9741089,
            29223268,
            14611634,
            7305817,
            21917452,
            10958726,
            5479363,
            16438090,
            8219045,
            24657136,
            12328568,
            6164284,
            3082142,
            1541071,
            4623214,
            2311607,
            6934822,
            3467411,
            10402234,
            5201117,
            15603352,
            7801676,
            3900838,
            1950419,
            5851258,
            2925629,
            8776888,
            4388444,
            2194222,
            1097111,
            3291334,
            1645667,
            4937002,
            2468501,
            7405504,
            3702752,
            1851376,
            925688,
            462844,
            231422,
            115711,
            347134,
            173567,
            520702,
            260351,
            781054,
            390527,
            1171582,
            585791,
            1757374,
            878687,
            2636062,
            1318031,
            3954094,
            1977047,
            5931142,
            2965571,
            8896714,
            4448357,
            13345072,
            6672536,
            3336268,
            1668134,
            834067,
            2502202,
            1251101,
            3753304,
            1876652,
            938326,
            469163,
            1407490,
            703745,
            2111236,
            1055618,
            527809,
            1583428,
            791714,
            395857,
            1187572,
            593786,
            296893,
            890680,
            445340,
            222670,
            111335,
            334006,
            167003,
            501010,
            250505,
            751516,
            375758,
            187879,
            563638,
            281819,
            845458,
            422729,
            1268188,
            634094,
            317047,
            951142,
            475571,
            1426714,
            713357,
            2140072,
            1070036,
            535018,
            267509,
            802528,
            401264,
            200632,
            100316,
            50158,
            25079,
            75238,
            37619,
            112858,
            56429,
            169288,
            84644,
            42322,
            21161,
            63484,
            31742,
            15871,
            47614,
            23807,
            71422,
            35711,
            107134,
            53567,
            160702,
            80351,
            241054,
            120527,
            361582,
            180791,
            542374,
            271187,
            813562,
            406781,
            1220344,
            610172,
            305086,
            152543,
            457630,
            228815,
            686446,
            343223,
            1029670,
            514835,
            1544506,
            772253,
            2316760,
            1158380,
            579190,
            289595,
            868786,
            434393,
            1303180,
            651590,
            325795,
            977386,
            488693,
            1466080,
            733040,
            366520,
            183260,
            91630,
            45815,
            137446,
            68723,
            206170,
            103085,
            309256,
            154628,
            77314,
            38657,
            115972,
            57986,
            28993,
            86980,
            43490,
            21745,
            65236,
            32618,
            16309,
            48928,
            24464,
            12232,
            6116,
            3058,
            1529,
            4588,
            2294,
            1147,
            3442,
            1721,
            5164,
            2582,
            1291,
            3874,
            1937,
            5812,
            2906,
            1453,
            4360,
            2180,
            1090,
            545,
            1636,
            818,
            409,
            1228,
            614,
            307,
            922,
            461,
            1384,
            692,
            346,
            173,
            520,
            260,
            130,
            65,
            196,
            98,
            49,
            148,
            74,
            37,
            112,
            56,
            28,
            14,
            7,
            22,
            11,
            34,
            17,
            52,
            26,
            13,
            40,
            20,
            10,
            5,
            16,
            8,
            4,
            2,
            1,
        ];
        assert_eq!(weird_algorithm(665215), expected);
    }
}
